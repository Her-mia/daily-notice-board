<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>daily-notice-broad</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>

<body>

    <div class="theme-bar">
        <label>主题颜色：</label>
        <select id="themeSelect" autocomplete="off">
            <option value="blue" selected>蓝色</option>
            <option value="pink">粉色</option>
            <option value="green">绿色</option>
        </select>
    </div>



    <div class="top">
        <div class="weather-grid">
            {# 第一行：白天天气 #}
            {% for w in data.weather %}
            <div class="weather-grid div">
                <div>{{ w.date }}</div>
                <img src="{{ url_for('static', filename='img/' + w.day_weather[2]) }}">
            </div>
            {% endfor %}

            {# 第二行：夜间天气 #}
            {% for w in data.weather %}
            <div class="weather-grid div">
                <div>{{ w.date }}</div>
                <img src="{{ url_for('static', filename='img/' + w.night_weather[2]) }}">
            </div>
            {% endfor %}
        </div>
    </div>


    </div>
    </div>





    <div class="bottom-container">
        <div class="bottom-left">
            <div class="add-date">
                <form action="/set_date" method="POST">
                    <input type="text" name="event_name" placeholder="事件名称，例如：生日" required>
                    <input type="date" name="target_date" placeholder="选择日期" required>
                    <button type="submit">设置目标日期</button>
                </form>
            </div>

            {% if data.events %}
            <div class="events-grid">
                {% for name, days in data.events.items() %}
                <div class="event-card">

                    <form action="/delete_event/{{ name }}" method="POST" class="delete-form">
                        <button class="delete-btn">x</button>
                    </form>

                    <form action="/delete_event/{{ name }}" method="POST" class="delete-form">
                        <button class="delete-btn">x</button>
                    </form>

                    <!-- 上半部分：事件名称（动态变色） -->
                    <div
                        class="event-top {% if days < 10 %}danger{% elif days < 30 %}warning{% else %}normal{% endif %}">
                        {{ name }}
                    </div>

                    <!-- 下半部分：剩余天数（固定灰色） -->
                    <div class="event-bottom">
                        还有 {{ days }} 天
                    </div>

                </div>
                {% endfor %}

            </div>

            {% else %}
            <p>还没有添加任何事件</p>
            {% endif %}
        </div>


        <div class="bottom-right">
            <div class="timer">

                <h1>倒计时</h1>
                <div id="timer">
                    <h1>...<h1>
                </div>
                <input type="number" id="minutes" min="1" max="180">
                <button onclick="setCountdown()">开始倒计时</button>

                <div id="msg" style="color:red;"></div>


            </div>
            <div class="road">
                <img src="{{ url_for('static', filename='img/car.png') }}" class="car">
            </div>
            <script src="{{ url_for('static', filename='js/timer.js') }}"></script>



        </div>

    </div>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>

</body>

</html>